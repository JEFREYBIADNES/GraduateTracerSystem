{% extends 'tracer/user/template.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}


<div class="row">
  <div class="col-lg-9 mt-1">
    <div class="row justify-content-center mt-4 mb-5">
      <div style="margin-top: 40px" class="card w-80">
        <div class="card-header">
          <strong>ADD POST!</strong>
        </div>
        <div class="card-body">
          <button type="button "class="btn btn-light btn-lg btn-block" data-toggle="modal" data-target=".bd-example-modal-lg" style="border-radius: 12px" >
            <h6><em> type something here...</em></h6>
          </button>
        </div>
        <div
          class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"aria-hidden="true" >
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="row justify-content-center">
                <div class="col-md-10 col-md-5 col-sm-12">
                  <h5><strong>CREATE POST</strong></h5>
                </div>
              </div>
              <div>
                <div class="card w-100 m-auto">
                  <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                      {% csrf_token %} {{ form | crispy }}
                      <div class="d-grid gap-2">
                        <button class="btn btn-success btn-sm btn-block">POST</button><br />
                        <button type="button" class="btn btn-light btn-md" data-toggle="modal" data-target=".bd-example-modal-lg" style="float: right">
                          <strong>Cancel </strong>
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-3 w-100 m-auto">
      {% for post in post_list %}
      <div class="col-md-12 col-lg-12 col-sm-12 border-bottom position-relative" >
        <div class="shadow p-3 mb-2 mb-0 bg-white rounded">
          <div class="card-header bg-trasparent border-none" style="background-color: #fff" >
            <a class="nav-link" id="{% url 'DisplayGradInfo' %}" href="{% url 'DisplayGradInfo' %}">
              <img class="img-profile rounded-circle" src="{{request.user.profile_picture.url}}" width=" 40" height="40" alt="User-Profile-Image"/>
              <span class="mr-2 d-none d-lg-inline text-gray-700 small"><strong>{{user.first_name}} {{user.middle_name}} {{user.last_name}}</strong></span>
            </a>
            <div class="mt-0 text-dark">
              <font size="">{{ post.created_on }}</font>
            </div>
          </div>
          <div class="card-body" style="background-color: #fff !important; color: black">
            <p>{{ post.body }}</p>
            <div class="position-relative text-brown mt-1">
              {% if post.image %}
              <img src="{{ post.image.url }}" class="post-image" />
              {% endif %}

              <a href="{% url 'post-detail' post.pk %}" class="stretched-link"></a>
            </div>
          </div>
          <div class="card-footer bg-trasparent border-none" style="background-color: fff">
            <div class="d-flex flex-row">
              <form method="POST" action="{% url 'like' post.pk %}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}" />
                <button
                  style="background-color: lightgray; color: info; border-bottom-color: none; box-shadow: none; " type="submit">
                  <i class="small fas fa-thumbs-up"><span> {{ post.likes.all.count }} </span></i>
                </button>
              </form>
              <form method="POST" action="{% url 'dislike' post.pk %}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}" />
                <button style=" background-color: lightgray; color: info; border-bottom-color: none; box-shadow: none;" type="submit">
                  <i class="small fas fa-thumbs-down"><span> {{ post.dislikes.all.count }} </span></i>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="col-lg-3">
    <div class="row justify-content-center text-content" style="height: 100% !important; padding-bottom: none !important">
      <ul class="w-100 bg-gradient-light sidebar sidebar-dark accordion" id="sidebnav-wrapper" style="height: 100% !important; text-color: rgb(3, 3, 3)">
        <div class="body">

            <strong>YOUR FRIENDS</strong>
            {% for grad_info in grad_infos %}
            {% if grad_info.approved %}
             {% if grad_info.email != request.user.email %}

                <li class="nav-item active">
                  <a class="nav-link">
                    <img class="img-profile rounded-circle shadow-sm" data-toggle="modal" data-target="#bd-example-modal-lg1{{grad_info.id}}" src="{{grad_info.profile_picture.url }} " width=" 50" height="50" alt="User-Profile-Image"/>
                    <span id="{{ grad_info.IDNum}}" class="mr-2 d-none d-lg-inline text-gray-700 small" data-toggle="modal" data-target="#bd-example-modal-lg1{{grad_info.id}}"><strong>{{grad_info.email}}</strong></span>
                  </a>
                </li>
                {% endif %}
             {% endif %}
           {% endfor %}
        </div>
      </ul>
    </div>
  </div>

  <!-- basic modal -->
  {% for grad_info in grad_infos %}
  <div class="modal fade" id="bd-example-modal-lg1{{grad_info.id}}" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <form method="POST" action="">
          {% csrf_token %}
          <div class="card-header text-white">
            <div class="row">
                <img class="img-profile rounded-circle shadow-sm" src="{{grad_info.profile_picture}} " width=" 50" height="50" alt="User-Profile-Image"/>


            </div>
          </div>

          <div  class="card-body">
              <div class="row">
                <div class="col-sm-3">
                      <h6 class="mb-0">Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{grad_info.first_name}} {{grad_info.middle_name}} {{grad_info.last_name}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Email</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{grad_info.email}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">School</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{grad_info.school}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Phone</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{grad_info.contact_number}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">ID Numbber</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{grad_info.IDNum}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Age</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                     {{grad_info.age}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Birthdate</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                     {{grad_info.birth_date}}
                    </div>
                  </div>
                  <hr>

                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Gender</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                     {{grad_info.gender}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Address</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                     {{grad_info.address}}
                    </div>
                  </div>
                    <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Course</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                     {{grad_info.course_type}}
                    </div>
                  </div>
                    <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Status</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                     {{grad_info.employment_status}}
                    </div>
                  </div>
                      <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Job Description</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                     {{grad_info.job_description}}
                    </div>
                  </div>
                    <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Skill</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                     {{grad_info.skill}}
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                  </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock content %}

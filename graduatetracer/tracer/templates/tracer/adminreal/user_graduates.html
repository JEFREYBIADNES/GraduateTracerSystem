{%  extends 'tracer/adminreal/templates.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<!-- Datatables -->

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.css">

  <style media="screen">
    .none{
      display:none;
    }

    .dataTables_wrapper{
      z-index: 0;
    }
    .dataTables_length{
      z-index: 2;
    }

    .dataTables_filter{
      display: none;
    }

    .dropdown-filter{
      top: 33px !important;
      position: relative;
      z-index: 1;
    }

    .dataTables_length{
      padding-bottom: 10px;
    }

    label {
      display: inline-block;
      margin-bottom: 0.5rem;
      margin-top: 1.5rem;
    }

    .th-w-20{
      width:20% !important;
    }
    .th-w-10{
      width:10% !important;
    }
  </style>

  <!-- Page increment -->
  <script>
    function show(shown, hidden) {

      document.getElementById(shown).style.display='block';
      document.getElementById(hidden).style.display='none';
      return false;
    }
  </script>
  <!-- End -->
<div class="card-header py-3 bg-gradient-info">
    <h6 class="m-0 font-weight-bold text-black">Graduates</h6>
</div>
<div class="container-fluid bg-white pr-4 pl-4 pb-2">
  <div class="row ">

    <div class="row w-20">

    </div>
    <div class="row w-80 justify-content-end dropdown-filter">

      <div class="col-xs-6 col-sm-9 col-md-9 col-lg-6 col-xl-3 p-1">
        <select id="query0" class="form-control" name="">
          <option value="">ID Number</option>
        {% for query in query_IDNum %}
          {% if query %}
          <option value="{{query}}">{{query}}</option>
          {% endif %}
        {% endfor %}
        </select>
      </div>
      <div class="col-xs-6 col-sm-9 col-md-9 col-lg-6 col-xl-3 p-1">
        <select id="query1" class="form-control" name="">
          <option value="">School</option>
        {% for query in query_school %}
          {% if query %}
          <option value="{{query}}">{{query}}</option>
          {% endif %}
        {% endfor %}
        </select>
      </div>
      <div class="col-xs-6 col-sm-9 col-md-9 col-lg-6 col-xl-3 p-1">
        <select id="query2" class="form-control" name="">
          <option value="">Employment Status</option>
        {% for query in query_employment_status %}
          {% if query %}
          <option value="{{query}}">{{query}}</option>
          {% endif %}
        {% endfor %}
        </select>
      </div>
    </div>
  </div>
  <table id="jobs" class="display table table-bordered table-responsive w-100">
      <thead>
          <tr>
            <th class="th-w-20" style="white-space: nowrap">Graduate Name</th>
            <th class="th-w-20" style="white-space: nowrap">Email</th>
            <th class="th-w-20" style="white-space: nowrap">ID Number</th>
            <th class="th-w-20" style="white-space: nowrap">School</th>
            <th class="th-w-20" style="white-space: nowrap">Employment Status</th>
            <th class="th-w-20" style="white-space: nowrap">Option</th>
          </tr>
      </thead>
      <tbody>
        {% for user_info in user_info %}
          <tr>
              <td class="th-w-20" style="white-space: nowrap">
                {{user_info.first_name}} {{user_info.middle_name}} {{user_info.last_name}}
              </td>
              <td class="th-w-20" style="white-space: nowrap">
                {{user_info.email}}
              </td>
              <td class="th-w-20" style="white-space: nowrap">
                {% if user_info.IDNum %}
                  {{user_info.IDNum}}
                {% endif %}
              </td>
              <td class="th-w-20" style="white-space: nowrap">
                {% if user_info.school %}
                  {{user_info.school}}
                {% endif %}
              </td>
              <td class="th-w-20" style="white-space: nowrap">
                {% if user_info.employment_status %}
                  {{user_info.employment_status}}
                {% endif %}
              </td>
              <td class="th-w-20" style="white-space: nowrap">
                <a class href="#"><i class="fas fa-eye"></i></a>
              </td>
          </tr>
        {% endfor %}
      </tbody>
  </table>
</div>


<!-- Datatables -->
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.js"></script>

<!-- Sweet Alert -->
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  {% for message in messages %}
  Swal.fire({
    position: 'center',
    icon: 'success',
    title: '{{message}}',
    showConfirmButton: false,
    timer: 3000
  })
  {% endfor %}
</script>

<script>
  $(document).ready(function() {
    var table = $('#jobs').DataTable( {
      stateSave: false,
      "ordering": true,
      "columnDefs" : [{"targets":3, "type":"date-eu"}],
      order: [],

    } );
    $('#query0').on('change', function(){
       table.columns(2).search(this.value).draw();
    });
    $('#query1').on('change', function(){
       table.columns(3).search(this.value).draw();
    });
    $('#query2').on('change', function(){
       table.columns(4).search(this.value).draw();
    });
} );
</script>

{% endblock %}
